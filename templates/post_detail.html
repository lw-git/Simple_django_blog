{% extends 'base.html' %}

{% load static %}

{% block content %}
<div class="post-entry">
	<h2>{{ post.title }}</h2>
	<p>{{ post.body|linebreaks }}</p>	
</div>

{% if user.is_authenticated %}
	{% if user == post.author %}
	<br />		
	<p><a href="{% url 'post_edit' post.pk %}" class="btn btn-primary ml-2">Edit Post</a>
	<a href="{% url 'post_delete' post.pk %}" class="btn btn-primary ml-2">Delete Post</a></p>
	<br />
	{% endif %}
{% endif %}

{% for comment in comments.all %}
	<div class="comment">
		<p class="info">
			Comment by 	
			{% if comment.author_status == 'staff' %}
				<span class="red">{{ comment.name }}</span>
			{% elif comment.author_status == 'user' %}	
				<span class="blue">{{ comment.name }}</span>
			{% else %}
				{{ comment.name }}
			{% endif %}
		</p>
		{{ comment.body|linebreaks }}		
	</div>
	{% empty %}
	<p>There are no comments yet.</p>
{% endfor %}
<br />
<h2>Add a new comment</h2>
<br />
<form action="." method="post">
	{% csrf_token %}	
	{% for field in comment_form.visible_fields %}	
		<p>{{ field }}</p>
	{% endfor %}	
	<button class="btn btn-success" type="submit">Add comment</button>
</form>
{% endblock content %}