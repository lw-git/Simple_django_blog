{% extends 'base.html' %}

{% load static %}

{% block content %} 
  <h2>{{ post.title }}</h2>
  <hr />                     
  <p>{{ post.body|linebreaks }}</p>   
  <h4 class="mb-4 mt-4">Comments:</h4>

  {% for comment in comments.all %}
  <div class="card mb-4">
    <div class="card-header">
      <span style="float:right;">added {{ comment.created | date }}</span>
      Comment by  
      {% if comment.author_status == 'staff' %}
        <span class="red">{{ comment.name }}</span>
      {% elif comment.author_status == 'user' %}  
        <span class="blue">{{ comment.name }}</span>
      {% else %}
        {{ comment.name }}
      {% endif %}   
    </div>
    <div class="card-body">      
      <p class="card-text">{{ comment.body|linebreaks }}</p>              
    </div>
    <div class="card-footer text-muted">     
    </div>
  </div>    
  {% empty %}
    <div class="card mb-4">
      <div class="card-header">    
      </div>
      <div class="card-body">        
        <p class="card-text">There are no comments yet.</p>              
      </div>
      <div class="card-footer text-muted">        
      </div>
    </div>
  {% endfor %}     
  </div>    

  <div class="container">
    <div class="row">
      <div class="col-md-6 mx-auto">
        <div class="card">
          <div class="card-header bg-primary text-white">
            <h4>Add a new comment</h4>
          </div>
          <div class="card-body">            
            <form action="." method="POST">
                {% csrf_token %}                
                <div class="form_fields">
                {% for field in comment_form.visible_fields %}                    
                    {{ field }}
                    <br />                    
                {% endfor %}
                </div>
              <input type="submit" value="Add comment" class="btn btn-success btn-block col-4 mx-auto">
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock content %}